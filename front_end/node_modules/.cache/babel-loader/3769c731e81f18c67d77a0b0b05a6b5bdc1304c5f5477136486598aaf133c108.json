{"ast":null,"code":"import { resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-5672a1e3\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"v-event-draggable\"\n};\nvar _hoisted_2 = [\"onMousedown\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_calendar = _resolveComponent(\"v-calendar\");\n  var _component_v_sheet = _resolveComponent(\"v-sheet\");\n  var _component_v_col = _resolveComponent(\"v-col\");\n  var _component_v_row = _resolveComponent(\"v-row\");\n  return _openBlock(), _createBlock(_component_v_row, {\n    \"class\": \"fill-height\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_v_col, null, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_v_sheet, {\n            height: \"600\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_calendar, {\n                ref: \"calendar\",\n                modelValue: _ctx.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n                  return _ctx.value = $event;\n                }),\n                color: \"primary\",\n                type: \"4day\",\n                events: _ctx.events,\n                \"event-color\": $options.getEventColor,\n                \"event-ripple\": false,\n                onChange: $options.getEvents,\n                \"onMousedown:event\": $options.startDrag,\n                \"onMousedown:time\": $options.startTime,\n                \"onMousemove:time\": $options.mouseMove,\n                \"onMouseup:time\": $options.endDrag,\n                onMouseleave: $options.cancelDrag\n              }, {\n                event: _withCtx(function (_ref) {\n                  var event = _ref.event,\n                    timed = _ref.timed,\n                    eventSummary = _ref.eventSummary;\n                  return [_createElementVNode(\"div\", _hoisted_1, [(_openBlock(), _createBlock(_resolveDynamicComponent({\n                    render: eventSummary\n                  })))]), timed ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    \"class\": \"v-event-drag-bottom\",\n                    onMousedown: _withModifiers(function ($event) {\n                      return $options.extendBottom(event);\n                    }, [\"stop\"])\n                  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_2)) : _createCommentVNode(\"v-if\", true)];\n                }),\n                _: 1 /* STABLE */\n              }, 8 /* PROPS */, [\"modelValue\", \"events\", \"event-color\", \"onChange\", \"onMousedown:event\", \"onMousedown:time\", \"onMousemove:time\", \"onMouseup:time\", \"onMouseleave\"])];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n\n        _: 1 /* STABLE */\n      })];\n    }),\n\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_v_row","_createVNode","_component_v_col","_component_v_sheet","height","_component_v_calendar","ref","_ctx","value","$event","color","type","events","$options","getEventColor","onChange","getEvents","startDrag","startTime","mouseMove","endDrag","onMouseleave","cancelDrag","event","_withCtx","_ref","timed","eventSummary","_createElementVNode","_hoisted_1","_resolveDynamicComponent","render","_createElementBlock","onMousedown","_withModifiers","extendBottom"],"sources":["C:\\Files\\Repositories\\VueJS\\FeriaEmpleoUCB\\front_end\\src\\views\\CalendarioView.vue"],"sourcesContent":["<template>\r\n    <v-row class=\"fill-height\">\r\n      <v-col>\r\n        <v-sheet height=\"600\">\r\n          <v-calendar\r\n            ref=\"calendar\"\r\n            v-model=\"value\"\r\n            color=\"primary\"\r\n            type=\"4day\"\r\n            :events=\"events\"\r\n            :event-color=\"getEventColor\"\r\n            :event-ripple=\"false\"\r\n            @change=\"getEvents\"\r\n            @mousedown:event=\"startDrag\"\r\n            @mousedown:time=\"startTime\"\r\n            @mousemove:time=\"mouseMove\"\r\n            @mouseup:time=\"endDrag\"\r\n            @mouseleave.native=\"cancelDrag\"\r\n          >\r\n            <template v-slot:event=\"{ event, timed, eventSummary }\">\r\n              <div class=\"v-event-draggable\">\r\n                <component :is=\"{ render: eventSummary }\"></component>\r\n              </div>\r\n              <div\r\n                v-if=\"timed\"\r\n                class=\"v-event-drag-bottom\"\r\n                @mousedown.stop=\"extendBottom(event)\"\r\n              ></div>\r\n            </template>\r\n          </v-calendar>\r\n        </v-sheet>\r\n      </v-col>\r\n    </v-row>\r\n  </template>\r\n  <script>\r\n  export default {\r\n    data: () => ({\r\n      value: '',\r\n      events: [],\r\n      colors: ['#2196F3', '#3F51B5', '#673AB7', '#00BCD4', '#4CAF50', '#FF9800', '#757575'],\r\n      names: ['Meeting', 'Holiday', 'PTO', 'Travel', 'Event', 'Birthday', 'Conference', 'Party'],\r\n      dragEvent: null,\r\n      dragStart: null,\r\n      createEvent: null,\r\n      createStart: null,\r\n      extendOriginal: null,\r\n    }),\r\n    methods: {\r\n      startDrag ({ event, timed }) {\r\n        if (event && timed) {\r\n          this.dragEvent = event\r\n          this.dragTime = null\r\n          this.extendOriginal = null\r\n        }\r\n      },\r\n      startTime (tms) {\r\n        const mouse = this.toTime(tms)\r\n\r\n        if (this.dragEvent && this.dragTime === null) {\r\n          const start = this.dragEvent.start\r\n\r\n          this.dragTime = mouse - start\r\n        } else {\r\n          this.createStart = this.roundTime(mouse)\r\n          this.createEvent = {\r\n            name: `Event #${this.events.length}`,\r\n            color: this.rndElement(this.colors),\r\n            start: this.createStart,\r\n            end: this.createStart,\r\n            timed: true,\r\n          }\r\n\r\n          this.events.push(this.createEvent)\r\n        }\r\n      },\r\n      extendBottom (event) {\r\n        this.createEvent = event\r\n        this.createStart = event.start\r\n        this.extendOriginal = event.end\r\n      },\r\n      mouseMove (tms) {\r\n        const mouse = this.toTime(tms)\r\n\r\n        if (this.dragEvent && this.dragTime !== null) {\r\n          const start = this.dragEvent.start\r\n          const end = this.dragEvent.end\r\n          const duration = end - start\r\n          const newStartTime = mouse - this.dragTime\r\n          const newStart = this.roundTime(newStartTime)\r\n          const newEnd = newStart + duration\r\n\r\n          this.dragEvent.start = newStart\r\n          this.dragEvent.end = newEnd\r\n        } else if (this.createEvent && this.createStart !== null) {\r\n          const mouseRounded = this.roundTime(mouse, false)\r\n          const min = Math.min(mouseRounded, this.createStart)\r\n          const max = Math.max(mouseRounded, this.createStart)\r\n\r\n          this.createEvent.start = min\r\n          this.createEvent.end = max\r\n        }\r\n      },\r\n      endDrag () {\r\n        this.dragTime = null\r\n        this.dragEvent = null\r\n        this.createEvent = null\r\n        this.createStart = null\r\n        this.extendOriginal = null\r\n      },\r\n      cancelDrag () {\r\n        if (this.createEvent) {\r\n          if (this.extendOriginal) {\r\n            this.createEvent.end = this.extendOriginal\r\n          } else {\r\n            const i = this.events.indexOf(this.createEvent)\r\n            if (i !== -1) {\r\n              this.events.splice(i, 1)\r\n            }\r\n          }\r\n        }\r\n\r\n        this.createEvent = null\r\n        this.createStart = null\r\n        this.dragTime = null\r\n        this.dragEvent = null\r\n      },\r\n      roundTime (time, down = true) {\r\n        const roundTo = 15 // minutes\r\n        const roundDownTime = roundTo * 60 * 1000\r\n\r\n        return down\r\n          ? time - time % roundDownTime\r\n          : time + (roundDownTime - (time % roundDownTime))\r\n      },\r\n      toTime (tms) {\r\n        return new Date(tms.year, tms.month - 1, tms.day, tms.hour, tms.minute).getTime()\r\n      },\r\n      getEventColor (event) {\r\n        const rgb = parseInt(event.color.substring(1), 16)\r\n        const r = (rgb >> 16) & 0xFF\r\n        const g = (rgb >> 8) & 0xFF\r\n        const b = (rgb >> 0) & 0xFF\r\n\r\n        return event === this.dragEvent\r\n          ? `rgba(${r}, ${g}, ${b}, 0.7)`\r\n          : event === this.createEvent\r\n            ? `rgba(${r}, ${g}, ${b}, 0.7)`\r\n            : event.color\r\n      },\r\n      getEvents ({ start, end }) {\r\n        const events = []\r\n\r\n        const min = new Date(`${start.date}T00:00:00`).getTime()\r\n        const max = new Date(`${end.date}T23:59:59`).getTime()\r\n        const days = (max - min) / 86400000\r\n        const eventCount = this.rnd(days, days + 20)\r\n\r\n        for (let i = 0; i < eventCount; i++) {\r\n          const timed = this.rnd(0, 3) !== 0\r\n          const firstTimestamp = this.rnd(min, max)\r\n          const secondTimestamp = this.rnd(2, timed ? 8 : 288) * 900000\r\n          const start = firstTimestamp - (firstTimestamp % 900000)\r\n          const end = start + secondTimestamp\r\n\r\n          events.push({\r\n            name: this.rndElement(this.names),\r\n            color: this.rndElement(this.colors),\r\n            start,\r\n            end,\r\n            timed,\r\n          })\r\n        }\r\n\r\n        this.events = events\r\n      },\r\n      rnd (a, b) {\r\n        return Math.floor((b - a + 1) * Math.random()) + a\r\n      },\r\n      rndElement (arr) {\r\n        return arr[this.rnd(0, arr.length - 1)]\r\n      },\r\n    },\r\n  }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.v-event-draggable {\r\n  padding-left: 6px;\r\n}\r\n\r\n.v-event-timed {\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n}\r\n\r\n.v-event-drag-bottom {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 4px;\r\n  height: 4px;\r\n  cursor: ns-resize;\r\n\r\n  &::after {\r\n    display: none;\r\n    position: absolute;\r\n    left: 50%;\r\n    height: 4px;\r\n    border-top: 1px solid white;\r\n    border-bottom: 1px solid white;\r\n    width: 16px;\r\n    margin-left: -8px;\r\n    opacity: 0.8;\r\n    content: '';\r\n  }\r\n\r\n  &:hover::after {\r\n    display: block;\r\n  }\r\n}\r\n</style>"],"mappings":";;;;;EAoBmB,SAAM;AAAmB;;;;;;;uBAnBxCA,YAAA,CA+BQC,gBAAA;IA/BD,SAAM;EAAa;wBACxB;MAAA,OA6BQ,CA7BRC,YAAA,CA6BQC,gBAAA;4BA5BN;UAAA,OA2BU,CA3BVD,YAAA,CA2BUE,kBAAA;YA3BDC,MAAM,EAAC;UAAK;gCACnB;cAAA,OAyBa,CAzBbH,YAAA,CAyBaI,qBAAA;gBAxBXC,GAAG,EAAC,UAAU;4BACLC,IAAA,CAAAC,KAAK;;yBAALD,IAAA,CAAAC,KAAK,GAAAC,MAAA;gBAAA;gBACdC,KAAK,EAAC,SAAS;gBACfC,IAAI,EAAC,MAAM;gBACVC,MAAM,EAAEL,IAAA,CAAAK,MAAM;gBACd,aAAW,EAAEC,QAAA,CAAAC,aAAa;gBAC1B,cAAY,EAAE,KAAK;gBACnBC,QAAM,EAAEF,QAAA,CAAAG,SAAS;gBACjB,mBAAe,EAAEH,QAAA,CAAAI,SAAS;gBAC1B,kBAAc,EAAEJ,QAAA,CAAAK,SAAS;gBACzB,kBAAc,EAAEL,QAAA,CAAAM,SAAS;gBACzB,gBAAY,EAAEN,QAAA,CAAAO,OAAO;gBACrBC,YAAU,EAASR,QAAA,CAAAS;;gBAEHC,KAAK,EAAAC,QAAA,CACpB,UAAAC,IAAA;kBAAA,IADwBF,KAAK,GAAAE,IAAA,CAALF,KAAK;oBAAEG,KAAK,GAAAD,IAAA,CAALC,KAAK;oBAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY;kBAAA,QAClDC,mBAAA,CAEM,OAFNC,UAEM,I,cADJ9B,YAAA,CAAsD+B,wBAAA;oBAAAC,MAAA,EAA5BJ;kBAAY,K,GAGhCD,KAAK,I,cADbM,mBAAA,CAIO;;oBAFL,SAAM,qBAAqB;oBAC1BC,WAAS,EAAAC,cAAA,WAAAzB,MAAA;sBAAA,OAAOI,QAAA,CAAAsB,YAAY,CAACZ,KAAK;oBAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}